[头条4面面经](https://www.nowcoder.com/discuss/207789?type=2&order=0&pos=9&page=1)

一面 项目+基础+算法

1. 悲观锁与乐观锁
悲观锁：每次去访问数据的时候，都认为别人会修改数据，因此需要上锁。这样其它人想要拿到这个数据就会阻塞，直到它拿到锁。写比较多，读比较少
乐观锁：一个线程在访问数据的，其它线程不会修改这个数据，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有修改过数据。用于写比较少，读比较多的情况

2. http和https的区别
	- https协议需要到ca申请证书，一般免费证书很少，需要交费
	- https协议需要到ca申请证书，一般免费证书很少，需要交费
	- http是超文本传输协议，信息是明文传输，https则具有安全性的ssl加密传输协议
	- http用的端口是80，而https的端口是443
	- http是简单的、无状态的连接，https是SSL+HTTP协议构建的可进行加密传输身份认证的网络协议
	
	- http的特点：支持C/S模式，简单快速，灵活，无连接，无状态
	- https的优点是机密性，数据安全性，保护了服务端
	- https需要额外技术支持，加重了服务端的负担
	
3. TCP和UDP的应用场景
	- TCP是基于连接的，可靠性高；UDP是无连接的，可靠性低
	- TCP有三次握手过程和等待重连过程，有延时，实时性差；UDP则实时性强，安全性略差。
	- TCP一般用于文件传输，如FTP和HTTP，对数据准确性要求较高，发送或接收邮件（POP IMAP SMTP 对数据准确性要求高，非紧急应用），远程登陆（SSH，Telnet，对数据准确性有一定要求，有连接的概念）等
	- UDP一般用于即时通信（QQ聊天，对数据准确性和要求比较低，但是速度必须快），在线视频（RTSP速度一定快，保证视频连续，但是偶尔丢帧，还是可以接受的），网络语音电话(VoIP 语音数据包一般较小，需要高速发送，偶尔断音没关系），还有NDS查询

4. http请求头包含哪些字段。

Host：初始URL中的主机和端口
Cookie：设置cookie,这是最重要的请求头信息之一
If-Modified-Since：只有当所请求的内容在指定的日期之后又经过修改才返回它，否则返回304“Not Modified”应答。
User-Agent：浏览器类型
Connection：表示是否需要持久连接。HTTP1.1
Accept-Encoding：浏览器能够进行解码的数据编码方式
Accept-Language：浏览器所希望的语言种类
Accept：浏览器可接受的MIME类型

1 GET/sample.jspHTTP/1.1
2 Accept:image/gif.image/jpeg,*/*
3 Accept-Language:zh-cn
4 Connection:Keep-Alive
5 Host:localhost
6 User-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)
7 Accept-Encoding:gzip,deflate
8
9 username=jinqiao&password=1234

第一行为http请求行，包含方法，URI和HTTP版本
2-7行为请求头，包含浏览器，主机，接受的编码方式和压缩方式
第8行是空行，表示请求头结束，这个空行是必须的
第9行是数据体

状态码：
1xx：指示信息–表示请求已接收，继续处理
2xx：成功–表示请求已被成功接收、理解、接受
3xx：重定向–要完成请求必须进行更进一步的操作
4xx：客户端错误–请求有语法错误或请求无法实现。
5xx：服务器端错误–服务器未能实现合法的请求。

5. 斐波那锲数列了解么？

了解，a[i] = a[i-1]+a[i-2]

6. 动态规划相比递归来说有什么优点

动态规划和递归的相同点都是通过求解子问题得到原问题的解。一般能用动态规划求解的问题，都可以用动态规划求解。动态规划的优点是会保存已经求解的子问题的解，要使用时直接从中取出，避免重复计算。

7. 判断镜像二叉树。

递归判断

8. 分析一下算法的时间复杂度，空间复杂度。

9. redis了解么，如何进行redis页面缓存

获取url地址，用url作为缓存key，判断是否已经缓存，如果已经缓存，则直接读取内容并返回。否则，通过Response获取返回内容，将内容放入到缓存中，并写出该内容页面。

Redis时一个开源的底层用C语言编写的key-value存储数据库，可用于缓存、时间发布订阅、高速队列等场景，内存数据库

	- 缓存数据：常用需要查询且变动不是很频繁的数据，热点数据
	- 消息队列：相当于RocketMQ
	- 计数器：统计点击率、点赞率，redis具有原子性，可避免并发问题
	- 网站信息，初始页面缓存
	- 热点数据：新闻网站的实时热点、微博热搜，需要频繁更新
	
Redis快的原因
	- 纯内存操作，需要的时候才持久化到磁盘中
	- 单线程，避免了多线程中的上下文频繁切换操作
	- 数据结构简单，对数据操作接单
	- 底层模型不同
	- 使用多路I/O复用模型，非阻塞I/O

Redis应用场景
	- String
	- Hash
	- List
	- Set
	- Sort Set
	
Redis的过期和内存淘汰
过期删除采用的是定期删除，默认每100ms检测一次，遇到过期的key则进行删除
当读到一个已经过期的key时，会触发Redis的惰性删除策略，直接回干掉过期的key

缓存击穿
	- 定时任务
	- 分级缓存
	- 拦截机制

缓存雪崩
	- 随机生效时间
	- 二级缓存
	- 加锁和队列方式避免过多请求
	
10. cookie和session的区别

- cookie是存储在本地浏览器，而session存储在服务器
- cookie包括名字，值，过期时间，路径和域
- Session是存在服务器的一种用来存放用户数据的类HashTable结构
- Session过多的时候会消耗服务器资源

二面50

1. 网络五层协议
物理层
数据链路层
网络层
传输层
应用层

七层：会话层、表示层
	